<div id="navBar" ng-controller="ElementsPanelController" class="clearfix">
    <section ng-controller="PagesController">
        <div>
            <ol class="element-path">
                <li id="breadcrumbs"><span>breadcrumbs</span></li>
                <li ng-repeat="el in selected.path" ng-class="{ active: $last }" ng-click="selectNode($index)"><span class="name">{{ el.name }}</span> <i class="icon icon-angle-right"></i></li>
            </ol>
        </div>
        <nav class="navbar navbar-default main_nav_builder">
            <div class="container-fluid">
                <div>
                    <ul class="nav navbar-nav main_navbar">
                        <li><a ui-sref="dashboard" bl-tooltip="dashboard"><i class="icon icon-left-open"></i></a></li>
                        <li><a href="" id="nav_pages" data-name="pages" slide-toggle="#nav-pages"><i class="icon icon-docs"></i><span>{{:: 'pages' | translate }}</span></a></li>
                        <li><a href="" data-name="elements" slide-toggle="#nav-elements"><i class="icon icon-puzzle-outline"></i><span>{{:: 'elements' | translate }}</span></a></li>
                        <li><a href="" data-name="design"   slide-toggle=".nav-themes"><i class="icon icon-brush-1"></i>Design</a></li>
                        <li><a href="" data-toggle="modal" data-target="#myModalSettings"><i class="icon icon-cog-outline"></i><span>{{:: 'settings' | translate }}</span></a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right bottom-navigation pointerCursor main_navbar" ng-controller="NavbarController">
                        <li><a ng-click="project.save()" ng-disabled="savingChanges">
                            <i class="icon" ng-class="savingChanges ? 'icon-spin6 icon-spin' : 'icon-floppy-1'"></i>Save</a></li>
                        <li><a ng-click="preview()" ><i class="icon icon-eye"></i>Preview</a></li>
                        <li><a ng-click="openPanel('export')" ><i class="icon icon-export"></i>Export</a></li>
                        <li><a data-toggle="modal" data-target="#publish-modal" ><i class="icon icon-publish"></i>Publish</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div id="elements-container" ng-controller="NavbarController">

            <div id="nav-pages" class="slideable pagesToggle" ng-class="{ open: panels.active === 'pages' }" data-name="pages">
                <div class="pages_nav">
                    <ul class="list-unstyled">
                        <li ng-repeat="page in project.active.pages track by $index"
                            ng-click="project.changePage(page.name)"
                            ng-class="{active: page.name == project.activePage.name}">
                            <span class="name">{{ page.name }}</span>
                        </li>
                    </ul>
                </div>

                <div class="container-fluid pageNavOptions">
                    <div class="row">
                        <div class="col-md-2 pages_nav_text">
                            <span>Page properties:</span>
                        </div>
                        <div class="col-md-2">
                            <input placeholder="page name" type="text" ng-disabled="project.activePage.name == 'Index'" class="form-control dark_input" ng-model="project.activePage.name" id="page-name">
                        </div>
                        <div class="col-md-2">
                            <input placeholder="page title" type="text" class="form-control dark_input" ng-model="project.activePage.title" id="page-title">
                        </div>
                        <div class="col-md-4 col-md-offset-2 action-buttons">
                            <button ng-click="createNewPage()"><i class="icon icon-doc-add"></i>New</button>
                            <button ng-click="savePage()" ><i class="icon icon-floppy-1"></i>Save</button>
                            <button ng-click="deletePage()" ng-disabled="project.activePage.name.toLowerCase() === 'index'"><i class="icon icon-trash"></i>Delete</button>
                            <button ng-click="copyPage()" ><i class="icon icon-docs-1"></i>Copy</button>
                        </div>
                    </div>
                </div>
            </div>

            <!--<div id="nav-elements" class="panel slideable elementsToggle open" data-name="elements" bl-panels-accordion>-->
                <!--<div id="elements-list">-->
                    <!--<ul id="elements" class="list-unstyled elementsNavStyle"></ul>-->
                <!--</div>-->
            <!--</div>-->

            <div id="nav-elements" class="panel slideable elementsToggle open" data-name="elements" bl-panels-accordion bl-pretty-scrollbar>
                <div id="elements-list">
                    <ul id="elements" class="list-unstyled elementsNavStyle"></ul>
                </div>
            </div>

            <div id="themes" ng-class="{ open: panels.active === 'themes' }" class="slideable nav-themes designToggle" data-name="themes">
                <div id="themes_nav" class="pages_nav">
                    <ul class="list-unstyled">
                        <li data-toggle="modal" data-target="#myModalThemes" class="themes_margin">Themes</li>
                        <li ng-click="openPanel('templates')" class="themes_margin">Templates</li>
                    </ul>
                </div>

            </div>
        </div>
    </section>
</div>


<!--dialog for theme-->
<div class="modal fade" id="myModalThemes" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
     ng-controller="ThemesController" bl-render-themes bl-pretty-scrollbar>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Themes</h4>
            </div>
            <div class="modal-body">
                <div id="themes-list">

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!--dialog for settings-->
<div class="modal fade" id="myModalSettings" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
     ng-controller="SettingsController">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalSettingsLabel">Settings</h4>
            </div>
            <div class="modal-body" id="settings">

                <div class="categories" bl-panels-accordion>
                    <div class="accordion-item" ng-repeat="(category, categorySettings) in settings.all" ng-class="{open: category !== 'contentBoxes'}">
                        <div class="accordion-heading-static" ng-class="{contextMenuVisibility: category === 'contentBoxes'}">{{:: category | translate }}</div>
                        <div class="accordion-body">
                            <div class="settings-container">
                                <div class="form-group setting" ng-repeat="setting in categorySettings">
                                    <div class="with-toggle" ng-if="isBoolean(setting.value)">
                                        <div class="label">{{ setting.name.toTitleCase() }}:</div>
                                        <div class="toggle toggle-light" data-name="{{setting.name}}" bl-settings-toggler="{{setting.value ? 'on' : 'off'}}"></div>
                                        <p>{{ setting.description }}</p>
                                    </div>
                                    <div class="with-input" ng-if="!isBoolean(setting.value)">
                                        <div class="label">{{ setting.name.toTitleCase() }}:</div>
                                        <input type="text" class="form-control" ng-model="setting.value">
                                        <p>{{ setting.description }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<section id="viewport" class="clearfix">
    <div class="flyout-from-right" ng-class="flyoutOpen ? 'open' : 'closed'">
        <div class="flyout-content" ng-class="activePanel == 'themesCreator' ? 'open' : 'closed'" id="bootstrap-theme-creator" ng-controller="ThemesCreatorController" bl-theme-creator>
            <div bl-close-flyout-panel></div>
            <input id="theme-creator-color-picker">
            <section class="row inner-content">
                <div id="custom-less" ng-class="customLessOpen ? 'open' : 'closed'">
                    <div class="header">{{ 'editCustomLess' | translate }} <i class="icon icon-cancel" ng-click="toggleCustomLessPanel()"></i></div>
                    <div id="custom-less-editor"></div>
                </div>
                <div class="col-sm-2 vars-groups-list" bl-pretty-scrollbar>
                    <ul class="list-unstyled">
                        <li ng-class="bootstrap.activeGroup == name ? 'active' : ''"  ng-repeat="(name, value) in bootstrap.currentTheme" data-name="{{ name }}">
                            <i ng-if="name == bootstrap.activeGroup" style="padding-right: 5px;" class="icon icon-angle-double-right"></i>
                            <span>{{ name }}</span>
                        </li>
                    </ul>
                </div>
                <div class="col-sm-2 vars-values-list" bl-pretty-scrollbar>
                    <ul class="list-unstyled">
                        <li ng-repeat="variable in bootstrap.activeVars.variables">
                            <div class="form-group">
                                <label>{{ variable.name }}</label>
                                <input data-name="{{ variable.name }}" ng-style="isColor(variable.value) ? getPreviewStyle(variable.value) : ''" class="form-control" type="text" ng-model="variable.value" ng-model-options="{ debounce: 400 }">
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-sm-8 theme-creator-preview"></div>
            </section>
            <section class="row flyout-panel-toolbar" id="theme-creator-toolbar">
                <div class="inner">
                    <button type="button" ng-click="applyChanges()" class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Apply changes to preview">{{ 'apply' | translate }}</button>
                    <button type="button" ng-click="toggleCustomLessPanel()" class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Add or edit custom less">{{ 'customLess' | translate }}</button>

                    <input type="text" ng-model="editing.name" placeholder="Name...">
                    <select ng-model="editing.type">
                        <option value="private">{{ 'private' | translate }}</option>
                        <option value="public">{{ 'public' | translate }}</option>
                    </select>
                    <button class="btn btn-primary" ng-disabled="editing.saving" ng-click="saveCurrent()">{{ 'save' | translate }}</button>

                    <div class="loader" ng-if="editing.saving"><i class="icon icon-spin6 icon-spin"></i></div>
                    <div class="error-message" ng-if="editing.errorMessage"><span class="text-danger">{{ editing.errorMessage }}</span></div>
                    <div class="save-status">
                        <span ng-if="!dirty" class="text-success">{{ 'allChangesSaved' | translate }}</span>
                        <span ng-if="dirty" class="text-danger">{{ 'unsavedChanges' | translate }}</span>
                    </div>
                </div>
            </section>
        </div>
        <div class="flyout-content" ng-class="activePanel == 'export' ? 'open' : 'closed'" ng-controller="ExportController" id="export-panel" bl-render-export-panel>
            <div bl-close-flyout-panel></div>

            <div ng-if="isDemo" class="demo-overlay"><p class="alert alert-info">Export functionality is disabled on demo site. Normally you would be able to export an entire project, a single page or image(s) in a .zip file or copy any of the pages markup or styles into clipboard.</p></div>
            <div ng-if="! userCan('export') && ! isDemo" class="demo-overlay"><p class="alert alert-info">{{ 'noPermToExport' | translate }}</p></div>

            <div class="row inner-content" ng-class="{demo: isDemo || ! userCan('export')}">

                <div class="images-column" ng-class="images.length ? 'col-md-2' : 'hidden'" bl-export-images>
                    <h2><span>{{ 'images' | translate }}</span></h2>
                    <ul class="list-unstyled">
                        <li ng-repeat="url in images" ng-style="{'background-image': 'url('+url+')'}"></li>
                    </ul>
                </div>
                <div class="html-column" ng-class="images.length ? 'col-md-5' : 'col-md-6'">
                    <h2><span>{{ 'markup' | translate }}</span> <button id="copy-html" class="btn btn-default">{{ 'copyToClipboard' | translate }}</button></h2>
                    <div id="html-export-preview"></div>
                </div>
                <div class="css-column" ng-class="images.length ? 'col-md-5' : 'col-md-6'">
                    <h2><span>{{ 'style' | translate }}</span> <button id="copy-css" class="btn btn-default">{{ 'copyToClipboard' | translate }}</button></h2>
                    <div id="css-export-preview"></div>
                </div>
            </div>

            <div class="row flyout-panel-toolbar" ng-class="{demo: isDemo || ! userCan('export')}" style="height: 55px">
                <div class="center-block">
                    <select ng-model="activePage.name" ng-change="changeExportPage()">
                        <option value="{{ page.name }}" ng-repeat="page in project.active.pages">{{ page.name }}</option>
                    </select>

                    <button ng-disabled="!activePage" bl-export-page class="btn btn-primary"><i class="icon icon-download"></i> Export Page</button>
                    <button bl-export-project class="btn btn-primary"><i class="icon icon-download"></i> {{ 'exportProject' | translate }}</button>
                </div>
            </div>
        </div>

        <div class="flyout-content" ng-class="activePanel == 'templates' ? 'open' : 'closed'" id="templates-panel" ng-controller="TemplatesController" bl-render-templates>
            <div bl-close-flyout-panel></div>

            <section class="row inner-content">
                <div class="col-sm-6" id="templates-list"></div>
                <div class="col-sm-6" id="templates-preview"></div>
            </section>

            <section class="row flyout-panel-toolbar" bl-template-actions style="height: 55px">
                <span>{{ 'withSelected' | translate }}</span>
                <button class="btn btn-primary use-template" ng-enabled="selectedTemplate">{{ 'use' | translate }}</button>
                <button class="btn btn-primary edit-template" ng-enabled="selectedTemplate">{{ 'edit' | translate }}</button>
                <button class="btn btn-danger delete-template" ng-enabled="selectedTemplate">{{ 'delete' | translate }}</button>

                <button class="btn btn-primary save-page-as-template">{{ 'saveAsTemplate' | translate }}</button>
                <div class="loader" ng-if="templates.loading"><i class="icon icon-spin6 icon-spin"></i></div>
            </section>

            <div class="modal fade" id="save-template-modal">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header clearfix">
                            <button type="button" class="close pull-right" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">{{ 'close' | translate }}</span></button>
                            <h4 class="modal-title">{{ 'createEditTemplate' | translate }}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="name">{{ 'templateName' | translate }}</label>
                                <input type="text" ng-model="templateData.name" class="form-control" name="name">
                            </div>
                            <div class="form-group">
                                <label for="category">{{ 'templateCategory' | translate }}</label>
                                <select name="category" class="form-control" ng-model="templateData.category">
                                    <option ng-repeat="category in templates.categories" value="{{ category }}">{{ category.ucFirst() }}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="color">{{ 'templatePrimaryColor' | translate }}</label>
                                <select name="color" class="form-control" ng-model="templateData.color">
                                    <option ng-repeat="color in templates.colors" value="{{ color.name }}">{{ color.name.ucFirst() }}</option>
                                </select>
                            </div>
                            <div class="checkbox" ng-if="templateData.type == 'edit'">
                                <label>
                                    <input ng-model="templateData.replaceContents" type="checkbox">
                                    <span>{{ 'replaceTemplateContents' | translate }}</span>
                                </label>
                            </div>
                            <div class="text-danger">{{ template.error }}</div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary">{{ 'saveAndClose' | translate }}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div id="description-container"></div>

    <div id="middle">
        <div id="context-menu" ng-controller="ContextMenuController" ng-show="contextMenuOpen">
            <h5 class="clearfix"><span class="name">{{ selected.element ? selected.element.name : '' }}</span><i ng-click="closeContextMenu()" class="icon icon-cancel"></i> </h5>
            <ul class="list-unstyled">
                <li ng-if="selected.isTable" ng-click="executeCommand('addRowBefore')"><div class="command-name">{{ 'addRowBefore' | translate }}</div></li>
                <li ng-if="selected.isTable" ng-click="executeCommand('addRowAfter')"><div class="command-name">{{ 'addRowAfter' | translate }}</div></li>
                <li ng-if="selected.isTable" ng-click="executeCommand('addColumnBefore')"><div class="command-name">{{ 'addColumnBefore' | translate }}</div></li>
                <li ng-if="selected.isTable" ng-click="executeCommand('addColumnAfter')"><div class="command-name">{{ 'AddColumnAfter' | translate }}</div></li>
                <li ng-if="selected.isTable" class="separator"></li>
                <li ng-click="executeCommand('selectParent')"><div class="command-name"><i class="icon icon-up-outline"></i> {{ 'selectParent' | translate }}</div></li>
                <li ng-click="executeCommand('wrapInTransparentDiv')"><div class="command-name"><i class="icon icon-bullseye"></i> {{ 'wrapInTransparentDiv' | translate }}</div></li>
                <li class="separator"></li>
                <li ng-click="executeCommand('cut')"><div class="command-name"><i class="icon icon-scissors"></i> {{ 'cut' | translate }}</div><div class="command-keybind">Ctrl+X</div></li>
                <li ng-click="executeCommand('copy')"><div class="command-name"><i class="icon icon-docs"></i> {{ 'copy' | translate }}</div><div class="command-keybind">Ctrl+C</div></li>
                <li ng-click="executeCommand('paste', $event)" ng-class="!dom.copiedNode ? 'disabled' : ''"><div class="command-name"><i class="icon icon-paste"></i> {{ 'paste' | translate }}</div><div class="command-keybind">Ctrl+V</div></li>
                <li ng-click="executeCommand('delete')"><div class="command-name"><i class="icon icon-trash"></i> {{ 'delete' | translate }}</div><div class="command-keybind">Del</div></li>
                <li ng-click="executeCommand('clone')"><div class="command-name"><i class="icon icon-database"></i> {{ 'duplicate' | translate }}</div></li>
                <li class="separator"></li>
                <li ng-click="executeCommand('moveSelected', 'up')"><div class="command-name"><i class="icon icon-up-open"></i> {{ 'moveUp' | translate }}</div><div class="command-keybind">&#8593;</div></li>
                <li ng-click="executeCommand('moveSelected', 'down')"><div class="command-name"><i class="icon icon-down-open"></i> {{ 'moveDown' | translate }}</div><div class="command-keybind">&#8595;</div></li>
                <li class="separator"></li>
                <li ng-click="executeCommand('undo')" ng-class="!undoManager.canUndo ? 'disabled' : ''"><div class="command-name"><i class="icon icon-reply"></i> {{ 'undo' | translate }}</div><div class="command-keybind">Ctrl+Z</div></li>
                <li ng-click="executeCommand('redo')" ng-class="!undoManager.canRedo ? 'disabled' : ''"><div class="command-name"><i class="icon icon-forward"></i> {{ 'redo' | translate }}</div><div class="command-keybind">Ctrl+Y</div></li>
                <li ng-class="{hidden: codeEditors.currentlyOpen == 'html'}" class="separator"></li>
                <li ng-class="{hidden: codeEditors.currentlyOpen == 'html'}" ng-click="executeCommand('viewSource')"><div class="command-name">{{ 'viewSource' | translate }}</div></li>
            </ul>
        </div>
        <div id="frame-wrapper" bl-builder bl-resizable bl-iframe-nodes-sortable bl-iframe-nodes-selectable bl-iframe-text-editable bl-iframe-themes-switchable bl-iframe-context-menu> <!-- bl-iframe-context-menu> -->
            <section id="highlights">
                <div id="linker" class="hidden" ng-controller="LinkerController">
                    <h3>{{ 'linkFor' | translate }} <span>{{ linker.label }}</span> <i ng-click="hideLinker()" class="fa pull-right fa-times"></i></h3>
                    <ul>
                        <li ng-class="{ disabled: linker.radio !== 'url' }">
                            <label class="pull-left">
                                <div class="radio-input"><input value="url" ng-model="linker.radio" type="radio"></div>
                            </label>
                            <div class="pull-right">
                                <div class="title">{{ 'websiteUrl' | translate }}</div>
                                <div class="body">
                                    <input class="form-control" ng-model="linker.url" ng-change="applyUrl()" type="text" placeholder="http://www.google.com">
                                </div>
                            </div>
                        </li>
                        <li ng-class="{ disabled: linker.radio !== 'page' }">
                            <label class="pull-left">
                                <div class="radio-input"><input value="page" ng-model="linker.radio" type="radio"></div>
                            </label>
                            <div class="pull-right">
                                <div class="title">{{ 'page' | translate }}</div>
                                <div class="body">
                                    <select ng-model="linker.page" ng-change="applyPage()" class="form-control">
                                        <option value="">{{ 'selectAPage' | translate }}</option>
                                        <option value="{{page.name}}" ng-repeat="page in project.active.pages">{{ page.name.ucFirst() }}</option>
                                    </select>
                                </div>
                            </div>
                        </li>
                        <li ng-class="{ disabled: linker.radio !== 'download' }">
                            <label class="pull-left">
                                <div class="radio-input"><input value="download" ng-model="linker.radio" type="radio"></div>
                            </label>
                            <div class="pull-right">
                                <div class="title">{{ 'download' | translate }}</div>
                                <div class="body">
                                    <input class="form-control" ng-model="linker.download" ng-change="applyDownload()" type="text" placeholder="https://www.google.com/images/srpr/logo11w.png">
                                </div>
                            </div>
                        </li>
                        <li ng-class="{ disabled: linker.radio !== 'email' }">
                            <label class="pull-left">
                                <div class="radio-input"><input value="email" ng-model="linker.radio" type="radio"></div>
                            </label>
                            <div class="pull-right">
                                <div class="title">{{ 'emailAddress' | translate }}</div>
                                <div class="body">
                                    <input class="form-control" ng-model="linker.email" ng-change="applyEmail()" type="text" placeholder="vebtolabs@gmail.com">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div id="latLngEditor" class="hidden">
                    <h3>Marker Options <i ng-click="$root.map.hide()" class="fa pull-right fa-times"></i></h3>
                    <ul>
                        <li>
                            <div class="pull-right">
                                <div class="title">{{ 'Latitude' | translate }}</div>
                                <div class="body">
                                    <input class="form-control" ng-model="$root.map.lat" ng-change="$root.map.apply()" type="text">
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="pull-right">
                                <div class="title">{{ 'Longitude' | translate }}</div>
                                <div class="body">
                                    <input class="form-control" ng-model="$root.map.lng" ng-change="$root.map.apply()" type="text">
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="pull-right">
                                <div class="title">{{ 'Zoom' | translate }}</div>
                                <div class="body">
                                    <input class="form-control" ng-model="$root.map.zoom" ng-change="$root.map.apply()" type="number">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div id="background-flyout-panel" class="hidden" ng-controller="BackgroundController">
                    <div class="bl-panel-header clearfix"><div class="name">{{ 'background' | translate }}</div><div class="bl-panel-btns" ng-click="closePanel"><i class="icon icon-cancel"></i></div></div>
                    <button type="button" open-media-manager="background" class="btn btn-primary btn-block">{{ 'mediaManager' | translate }}</button>
                    <div id="texturePresets">
                        <h5>{{ 'textures' | translate }}</h5>
                        <ul class="img-presets-list" bl-pretty-scrollbar>
                            <li ng-repeat="texture in textures track by $index">
                                <div ng-click="selectPreset($event)" class="preset" ng-style="{ 'background-image': 'url('+baseUrl+'/assets/images/textures/'+$index+'.png)' }"></div>
                            </li>
                        </ul>
                        <div id="image-properties">
                            <h5>{{ 'imageProperties' | translate }}</h5>
                            <div id="img-positioning" class="clearfix">
                                <div class="pull-left">
                                    <h6>{{ 'repeat' | translate }}</h6>
                                    <ul class="list-unstyled">
                                        <li><div class="radio"><label><input value="no-repeat" ng-checked="properties.repeat == 'no-repeat'" ng-model="properties.repeat" type="radio">{{ 'none' | translate }}</label></div></li>
                                        <li><div class="radio"><label><input value="repeat-x" ng-checked="properties.repeat == 'repeat-x'" ng-model="properties.repeat" type="radio">{{ 'horizontal' | translate }}</label></div></li>
                                        <li><div class="radio"><label><input value="repeat-y" ng-checked="properties.repeat == 'repeat-y'" ng-model="properties.repeat" type="radio">{{ 'vertical' | translate }}</label></div></li>
                                        <li><div class="radio"><label><input value="repeat" ng-checked="properties.repeat == 'repeat'" ng-model="properties.repeat" type="radio">{{ 'all' | translate }}</label></div></li>
                                    </ul>
                                </div>
                                <div class="pull-right">
                                    <h6>{{ 'alignment' | translate }}</h6>
                                    <div id="alignment" bl-img-alignment-grid></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="gradientPresets">
                        <h5>{{ 'gradients' | translate }}</h5>
                        <ul class="img-presets-list" bl-pretty-scrollbar>
                            <li ng-repeat="gradient in gradients track by $index">
                                <div class="preset" ng-click="selectPreset($event)" ng-style="{ 'background-image': gradient }"></div>
                            </li>
                        </ul>
                    </div>

                </div>
                <div bl-hover-box></div>
                <div id="select-box" ng-hide="dragging" bl-columns-resizable>
                    <div id="select-box-actions" bl-context-box-actions ng-hide="rowEditorOpen">
                        <span class="element-tag"></span>
                        <i class="icon icon-right-outline" data-action="link" ng-show="selected.element.name == 'link'" bl-toggle-follow-link></i>
                        <i id="image" class="icon icon-picture" data-action="picture" ng-if="selected.isImage" open-media-manager="src"></i>
                        <i id="image" class="icon icon-picture" data-action="picture" ng-if="!selected.isImage && !selected.isMap"bl-show-img-container></i>
                        <i class="icon" ng-class="selected.isMap ? 'icon-location' : 'icon-pencil'" data-action="edit"></i>
                        <i class="icon" ng-class="selected.locked ? 'icon-lock' : 'icon-lock-open'" bl-toggle-element-lock data-action="lock"></i>
                        <i class="icon icon-trash" data-action="delete"></i>
                    </div>
                    <div id="column-resizers"></div>
                    <div id="resize-handles" ng-show="!selected.isColumn && settings.get('showWidthAndHeightHandles') && !rowEditorOpen">
                        <span data-direction="nw" class="drag-handle nw-handle"></span>
                        <span data-direction="n" class="drag-handle n-handle"></span>
                        <span data-direction="ne" class="drag-handle ne-handle"></span>
                        <span data-direction="e" class="drag-handle e-handle"></span>
                        <span data-direction="se" class="drag-handle se-handle"></span>
                        <span data-direction="s" class="drag-handle s-handle"></span>
                        <span data-direction="sw" class="drag-handle sw-handle"></span>
                        <span data-direction="w" class="drag-handle w-handle"></span>
                    </div>
                </div>
                <div id="edit-columns" bl-toggle-row-editor><i class="icon icon-cog-outline"></i> <span>{{ 'editColumns' | translate }}</span></div>
                <div id="row-editor" bl-row-editor>
                    <div class="column-controls"></div>
                    <div class="row-presets clearfix">
                        <button class="btn btn-sm btn-default equalize-columns pull-left">{{ 'makeColsEqual' | translate }}</button>
                        <div class="pull-right" bl-row-presets></div>
                    </div>
                    <div class="column-controls-footer clearfix">
                        <i class="icon icon-cancel close-row-editor"></i>
                        <button class="btn btn-sm btn-primary pull-right save-and-close-row-editor">{{ 'saveAndClose' | translate }}</button>
                    </div>
                </div>
                <div id="text-toolbar" ng-controller="ToolbarController" bl-floating-toolbar>

                    <select id="toolbar-size" bl-pretty-select="font.size" data-width="120" append-to="#text-toolbar">
                        <option value="">Size</option>
                        <option ng-repeat="num in fontSizes" data-font-size="{{ num }}">{{ num }}</option>
                    </select>
                    <select id="toolbar-font" bl-pretty-select="font.family" data-width="150" append-to="#text-toolbar">
                        <option value="">Font</option>
                        <option ng-repeat="font in baseFonts" data-font-family="{{ font.css }}">{{ font.name }}</option>
                    </select>
                    <div id="toolbar-style">
                        <div class="bold">B</div>
                        <div class="italic">I</div>
                        <div class="underline">U</div>
                        <div class="strike">S</div>

                        <div class="wrap-link"><i class="icon icon-link-outline"></i></div>

                        <div class="align-left"><i class="icon icon-align-left"></i> </div>
                        <div class="align-center"><i class="icon icon-align-center"></i> </div>
                        <div class="align-right"><i class="icon icon-align-right"></i> </div>

                        <div class="show-icons-list" bl-toggle-icon-list><i class="icon icon-emo-thumbsup"></i> </div>
                        <section id="icons-list">
                            <div class="arrow-up"></div>
                            <input type="text" placeholder="Search for icons" ng-model="iconSearch">
                            <ul class="list-unstyled list-inline">
                                <li ng-repeat="icon in icons | filter:iconSearch" class="icon" data-icon-class="{{ icon }}"><i class="{{ icon }}"></i></li>
                            </ul>
                        </section>
                    </div>
                    <div id="link-details" class="hidden">
                        <input type="text" class="form-control" ng-model="href" placeholder="Url...">
                        <input type="text" class="form-control" ng-model="title" placeholder="Title...">
                        <button type="button" class="btn btn-primary" id="wrap-with-link" ng-disabled="href == 'http://'">Go</button>
                    </div>
                </div>
            </section>
            <iframe id="iframe" frameborder="0" class="full-width"></iframe>
            <div id="frame-overlay" class="hidden"></div>
            <div id="theme-loading" class="hidden"><span>{{ 'loading' | translate }}...</span></div>
        </div>
    </div>
    <div id="code-editor-wrapper" ng-controller="CodeEditorController" bl-render-editors>
        <div id="editor-header" class="clearfix">
            <div class="pull-left">
                <select class="pretty-select" ng-model="editors.theme" ng-options="name for name in themes" ng-change="editors.changeTheme()"></select>
            </div>
            <div class="pull-right" id="editor-icons">
                <button ng-class="{ active: editors.currentlyOpen === 'html' }" class="btn btn-primary btn-sm" type="button" bl-show-editor="html">{{ 'html' | translate }}</button>
                <button ng-class="{ active: editors.currentlyOpen === 'css' }" class="btn btn-primary btn-sm" type="button" bl-show-editor="css">{{ 'css' | translate }}</button>
                <button ng-class="{ active: editors.currentlyOpen === 'js' }" class="btn btn-primary btn-sm" type="button" bl-show-editor="js">{{ 'js' | translate }}</button>
                <button class="btn btn-sm with-icon expand-editor"><i class="icon icon-resize-full-alt"></i> </button>
                <button class="btn btn-sm with-icon close-editor"><i class="icon icon-cancel"></i> </button>
            </div>
        </div>
        <div class="code-editor" id="html-code-editor"></div>
        <div class="code-editor hidden" id="css-code-editor"></div>
        <div class="code-editor hidden clearfix" id="js-code-editor">
            <div class="col-sm-10 editor-column" id="jscript-code-editor"></div>
            <div class="col-sm-2 libraries-column">
                <div class="body" bl-js-libraries>
                    <h4 class="clearfix"><span class="pull-left">{{ 'libraries' | translate }}</span> <i class="icon icon-plus-outline pull-right new-library"></i></h4>

                    <input type="text" class="form-control" ng-model="libraryQuery" placeholder="Search...">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" ng-model="onlyShowAttachedLibs"> {{ 'onlyShowAttached' | translate }}
                        </label>
                    </div>

                    <ul class="libraries-list">
                        <li ng-class="{ attached: libraries.isAttached(lib) }"
                            data-name="{{ lib.name }}"
                            ng-if="! onlyShowAttachedLibs || libraries.isAttached(lib)"
                            ng-repeat="lib in libraries.all | filter:libraryQuery">
                            <i class="icon icon-link-outline"></i>
                            <span class="name">{{ lib.name.ucFirst() }}</span>
                            <div class="lib-actions">
                                <i ng-if="lib.type != 'public'" title="Edit Library" class="icon icon-cog-outline edit-library"></i>
                                <i ng-if="lib.type != 'public'" title="Remove Library" class="icon icon-trash delete-library"></i>
                            </div>
                        </li>
                    </ul>

                </div>
            </div>

            <div class="modal fade" id="new-library-modal" bl-new-library-modal>
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close pull-right" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                            <h4 class="modal-titlet">{{ 'createNewLibrary' | translate }}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="name">{{ 'libraryName' | translate }}</label>
                                <input type="text" class="form-control" name="name" ng-model="libraries.form.name">
                            </div>
                            <div class="form-group">
                                <label for="path">{{ 'libraryPath' | translate }}</label>
                                <input type="text" class="form-control" name="path" ng-model="libraries.form.path">
                                <p class="help-block">{{ 'pathToLibrary' | translate }}</p>
                            </div>
                            <p class="text-danger">{{ libraries.form.error }}</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-danger close-modal">{{ 'close' | translate }}</button>
                            <button class="btn btn-primary float-right save-library">{{ 'saveAndClose' | translate }}</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div id="code-editor-resize-overlay"></div>

    <div class="modal fade" id="fonts-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-header clearfix">
                    <div title="Close Modal" class="close-modal" data-dismiss="modal">
                        <i class="icon icon-cancel-circled"></i>
                    </div>

                    <h4 class="modal-title pull-left">{{ 'selectOneOf' | translate }} {{ fonts.paginator.sourceItems.length }} {{ 'googleFonts' | translate }}</h4>
                    <div class="pagi-container pull-right"><ul class="pagination" bl-fonts-pagination></ul></div>
                </div>

                <div class="modal-body">
                    <ul class="fonts-list">
                        <li ng-repeat="font in fonts.paginator.currentItems" style="font-family: {{ font.family }}" ng-click="fonts.apply(font)">
                            <div class="font-preview">{{ 'fontsLorem' | translate }}</div>
                            <div class="font-details clearfix">
                                <div class="pull-left">{{ font.family+', '+font.category }}</div>
                            </div>
                        </li>
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="images-modal">
        <div class="modal-dialog">
            <div class="modal-content" ng-controller="MediaManagerController">
                <div class="modal-header clearfix">
                    <button type="button" class="close pull-right" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title pull-left">{{ 'mediaManager' | translate }}</h4>
                </div>
                <div class="modal-body">

                    <div class="modal-under-header clearfix">
                        <div class="pull-left">
                            <p class="info">{{ 'uploadAndMangeImages' | translate }}</p>
                            <p class="info">{{ 'imageRestrictions' | translate }}</p>
                        </div>
                        <div class="pull-right">
                            <button class="btn btn-primary btn-lg" ng-file-select="onFileSelect($files)" data-multiple="true"><i class="icon icon-upload"></i> {{ 'uploadImages' | translate }}</button>
                        </div>
                    </div>

                    <ul class="nav nav-tabs" bl-media-manager-tabs>
                        <li ng-class="activeTab == 'my-images' ? 'active' : ''" ng-click="activeTab = 'my-images'"><a href="">{{ 'myImages' | translate }}</a></li>
                        <li ng-class="activeTab == 'url' ? 'active' : ''" ng-click="activeTab = 'url'"><a href="">{{ 'imageUrl' | translate }}</a></li>
                    </ul>

                    <div class="tab-content">
                        <div ng-class="activeTab == 'my-images' ? 'active' : ''" class="tab-pane clearfix" id="my-images">
                            <div id="images-filter-bar" class="clearfix">
                                <div class="pull-right">
                                    <div class="checkbox-btn btn btn-gradient-gray" ng-class="{ active: selectAll }">
                                        <input type="checkbox" ng-model="selectAll" value="true">
                                    </div>
                                    <div class="btn-group">
                                        <button type="button" ng-class="{ active: sorting.prop == 'created_at' }" ng-click="changeSorting('created_at')" class="btn btn-gradient-gray btn-sm">{{ 'date' | translate }}</button>
                                        <button type="button" ng-class="{ active: sorting.prop == 'display_name' }" ng-click="changeSorting('display_name')" class="btn btn-gradient-gray btn-sm">{{ 'aZ' | translate }}</button>
                                    </div>
                                    <button ng-click="deleteSelectedImages()" class="btn btn-gradient-gray btn-sm"><i class="icon icon-trash"></i> </button>
                                    <input type="text" ng-model="searchQuery">
                                </div>
                            </div>
                            <div class="col-sm-2" id="folders-cont">
                                <div class="row">
                                    <ul class="list-unstyled" bl-image-folder-selectable>

                                        <li ng-repeat="folder in folders" ng-class="(selectedFolder.name == folder.name || folder.creating) ? 'active' : ''"  data-id="{{ folder.id }}" data-name="{{ folder.name }}">
                                            <div ng-if="!folder.creating" class="clearfix">
                                                <span class="pull-left">{{ folder.name }}</span>
                                                <i ng-click="deleteFolder(folder.id);$event.stopPropagation();" ng-if="folder.id" data-toggle="tooltip" data-placement="top" title="delete folder" class="icon icon-trash delete-folder pull-right"></i>
                                            </div>
                                            <div ng-if="folder.creating" class="creating-folder">
                                                <input ng-model="newFolder.name" type="text" name="name" class="form-control">
                                                <button class="btn btn-sm btn-primary" ng-click="createFolder()"> <i class="icon icon-check"></i></button>
                                                <button class="btn btn-sm btn-danger" ng-click="cancelFolderCreation()"> <i class="icon icon-cancel"></i></button>
                                            </div>
                                        </li>
                                    </ul>
                                    <div class="add-folder-cont">
                                        <button class="btn btn-primary btn-block" bl-new-image-folder><i class="icon icon-folder-open"></i> {{ 'addFolder' | translate }}</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-10" id="images-cont">
                                <ul class="list-unstyled row" bl-images-selectable>
                                    <li ng-class="{ selected: isSelected(image.id) }"
                                        ng-repeat="image in images | filter: selectedFolder.name == 'All Images' ? '' : selectedFolder.name | filter: searchQuery | orderBy:sorting.prop:sorting.reverse"
                                        class="col-sm-2"
                                        data-id="{{ image.id }}">

                                        <div class="img-wrapper" style="background-image: url({{ baseUrl }}/assets/images/uploads/{{image.file_name}})"></div>
                                        <div class="img-caption">
                                            <span>{{ image.display_name.substring(0,12) }}</span>

                                            <div class="img-actions" bl-image-actions>
                                                <i data-toggle="tooltip" data-placement="top" title="Edit" class="icon icon-pencil edit-image"></i>
                                                <i data-toggle="tooltip" data-placement="top" title="Delete" class="icon icon-trash delete-image"></i>
                                            </div>
                                        </div>
                                    </li>
                                </ul>

                                <div ng-show="images.length < 1" id="upload-container" ng-file-drop="onFileSelect($files)">
                                    <img class="img-responsive" src="assets/images/filedrop.png">
                                    <h2>{{ 'dropImageToUpload' | translate }}</h2>
                                    <div class="separator"><span>{{ 'or' | translate }}</span></div>
                                    <button class="btn btn-primary btn-lg" ng-file-select="onFileSelect($files)" data-multiple="true">{{ 'selectImageFrom' | translate }}</button>
                                </div>
                            </div>
                        </div>
                        <div ng-class="activeTab == 'url' ? 'active' : ''" class="tab-pane" id="url">
                            <h2>{{ 'enterImageWebUrl' | translate }}</h2>
                            <input type="text" ng-model="webImageUrl" class="form-control">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" ng-model="downloadLocally" value="true"> {{ 'downloadLocally' | translate }}
                                </label>
                            </div>
                            <p>{{ 'mustBeDirectLink' | translate }}</p>
                            <p>{{ 'imageUrlExample' | translate }}</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer clearfix">
                    <p class="pull-left" ng-if="activeTab == 'my-images'">{{ 'useImageExpl' | translate }}</p>
                    <button class="btn btn-primary btn-lg" ng-click="useImage()">{{ 'useImage' | translate }}</button>
                </div>
            </div>
        </div>
    </div>
</section>

<div id="preview-closer" class="hidden" ng-click="closePreview()">
    <i class="icon icon-cancel"></i>
</div>